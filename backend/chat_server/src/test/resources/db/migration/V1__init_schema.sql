CREATE TABLE IF NOT EXISTS chatters (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(255),
  user_id BIGINT UNIQUE,
  banned BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_by VARCHAR(255),
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_by VARCHAR(255),
  deleted_at TIMESTAMP,
  deleted_by VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS simple_chat (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  message VARCHAR(255),
  read BOOLEAN DEFAULT FALSE,
  chatters_id BIGINT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_by VARCHAR(255),
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_by VARCHAR(255),
  deleted_at TIMESTAMP,
  deleted_by VARCHAR(255),
  CONSTRAINT fk_simple_chat_chatter FOREIGN KEY (chatters_id)
      REFERENCES chatters(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS group_chat (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  message VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_by VARCHAR(255),
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_by VARCHAR(255),
  deleted_at TIMESTAMP,
  deleted_by VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS groups (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(255),
  description VARCHAR(255),
  admin_only BOOLEAN,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_by VARCHAR(255),
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_by VARCHAR(255),
  deleted_at TIMESTAMP,
  deleted_by VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS group_member (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  access_level VARCHAR(15),
  admin_only BOOLEAN,
  chatters_id BIGINT,
  group_id BIGINT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_by VARCHAR(255),
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_by VARCHAR(255),
  deleted_at TIMESTAMP,
  deleted_by VARCHAR(255),
  CONSTRAINT fk_group_member_chatter FOREIGN KEY (chatters_id)
      REFERENCES chatters(id) ON DELETE CASCADE,
  CONSTRAINT fk_group_member_group FOREIGN KEY (group_id)
      REFERENCES groups(id) ON DELETE CASCADE
);
